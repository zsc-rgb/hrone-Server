  # 🎯 学习计划

## 总体目标

通过逐步实现一个企业级后端系统，深入理解Spring Boot项目的架构和实现。

## 学习方式

**循序渐进 + 动手实践**
- 每个阶段都有明确的学习目标
- 每个功能都要自己动手实现
- 理解每行代码的作用和原理
- 遇到问题及时查资料、提问

## 📅 学习进度

| 阶段 | 内容 | 预计时间 | 状态 | 完成日期 |
|-----|------|---------|-----|----------|
| 第1阶段 | 项目基础搭建 | 半天 | ✅ 已完成 | 2025-11-03 |
| 第2阶段 | 通用工具模块 | 1-2天 | ✅ 已完成 | 2025-11-05 |
| 第2.1阶段 | 统一响应结果 | 1小时 | ✅ 已完成 | 2025-11-05 |
| 第2.2阶段 | 基础工具类 | 2小时 | ✅ 已完成 | 2025-11-05 |
| 第3阶段 | 数据访问层 | 1天 | ✅ 已完成 | 2025-11-05 |
| 第4阶段 | Redis缓存 | 半天 | ✅ 已完成 | 2025-11-06 |
| 第5阶段 | 系统基础模块 | 2天 | ✅ 已完成 | 2025-11-06 |
| 第6阶段 | 安全认证 | 2天 | 🔄 进行中 | 2025-11-11 |
| 第7阶段 | 权限系统 | 1天 | ⏳ 待开始 | - |
| 第8阶段 | API接口开发 | 1-2天 | ⏳ 待开始 | - |
| 第9阶段 | 高级特性 | 2-3天 | ⏳ 待开始 | - |

**总计：** 约 10-15天 （根据个人基础和学习时间而定）

## 🗓️ 建议学习节奏

### 方案1：全职学习（推荐）

- **每天学习时间：** 6-8小时
- **学习周期：** 2周
- **学习计划：**
  - 第1-2天：第1-2阶段（基础搭建 + 通用工具）
  - 第3-4天：第3-4阶段（数据访问 + Redis）
  - 第5-7天：第5-6阶段（系统模块 + 安全认证）
  - 第8-9天：第7-8阶段（权限系统 + API开发）
  - 第10-12天：第9阶段（高级特性）
  - 第13-14天：总结复习、完善项目

### 方案2：业余学习

- **每天学习时间：** 2-3小时
- **学习周期：** 4-5周
- **学习计划：**
  - 每周完成2个阶段
  - 周末集中学习复杂的内容
  - 工作日学习简单的内容

## 📝 学习建议

### 1. 学习方法

- ✅ **先理解再动手**：不要直接复制代码，先理解为什么这样写
- ✅ **循序渐进**：按照阶段顺序学习，不要跳跃
- ✅ **多做笔记**：记录重要知识点和遇到的问题
- ✅ **及时总结**：每完成一个阶段，总结学到了什么

### 2. 遇到问题怎么办

1. **先自己思考**：尝试分析问题原因
2. **查看文档**：查看官方文档或教程
3. **搜索错误信息**：Google/百度搜索错误信息
4. **查看源码**：看看相关类的实现
5. **提问讨论**：在技术社区提问或与同学讨论

### 3. 代码规范

- 使用驼峰命名法
- 添加必要的注释
- 保持代码整洁
- 合理拆分方法
- 遵循单一职责原则

### 4. 测试验证

- 每实现一个功能都要测试
- 使用Postman或浏览器测试接口
- 写单元测试（推荐）
- 验证边界情况和异常情况

## 📚 推荐学习资源

### 官方文档

- [Spring Boot官方文档](https://spring.io/projects/spring-boot)
- [Spring Security官方文档](https://spring.io/projects/spring-security)
- [MyBatis-Plus官方文档](https://baomidou.com/)
- [Redis官方文档](https://redis.io/documentation)

### 视频教程

- 尚硅谷Spring Boot教程
- 黑马程序员Spring Boot教程
- 哔哩哔哩搜索相关视频

### 书籍推荐

- 《Spring Boot实战》
- 《Spring Boot编程思想》
- 《深入浅出Spring Boot》

## 🎯 学习目标检查

每完成一个阶段，请检查是否达到以下目标：

### 第1阶段：基础搭建 ✅

- [x] 能独立创建Maven多模块项目
- [x] 理解各模块的职责和依赖关系
- [x] 能成功启动Spring Boot应用
- [x] 理解Spring Boot的自动配置原理

### 第2阶段：通用工具模块 (进行中)

- [x] 能设计统一的响应结果格式
- [x] 掌握常用工具类的实现
- [x] 理解Java泛型和枚举的使用
- [x] 能实现通用实体类
- [x] 能实现全局异常处理
- [x] 能定义项目常量

**第2阶段 100%完成！** 🎉

### 第3阶段：数据访问层 ✅

- [x] 能配置Druid数据源
- [x] 能使用MyBatis-Plus进行CRUD操作
- [x] 理解分页查询的实现
- [x] 掌握条件构造器的使用

### 第4阶段：Redis缓存 ✅

- [x] 能配置Redis连接
- [x] 能使用RedisTemplate操作缓存
- [x] 理解缓存的应用场景
- [x] 掌握缓存过期策略
- [x] 掌握5种Redis数据类型的使用
- [x] 理解对象序列化和反序列化

### 第5阶段：系统基础模块 ✅

- [x] 能设计数据库表结构
- [x] 能实现基本的CRUD接口
- [x] 理解用户-角色-菜单关系
- [x] 掌握树形结构的构建
- [x] 理解RBAC权限模型
- [x] 掌握递归算法
- [x] 理解祖级列表（ancestors）
- [x] 掌握关联表设计

### 第6阶段：安全认证

- [x] 理解JWT的原理和应用（6.1完成）
- [x] 能实现登录认证功能（已完成登录接口与签发Token）
- [x] 能实现验证码生成与校验（/auth/captcha，Redis缓存）
- [x] 能实现Token验证（6.3过滤器完成）
- [ ] 理解Spring Security的工作原理（预告）

### 第7阶段：权限系统

- [ ] 理解RBAC权限模型
- [ ] 能实现接口权限验证
- [ ] 能实现数据权限过滤
- [ ] 掌握AOP的应用

### 第8阶段：API接口开发

- [ ] 能规范地设计RESTful接口
- [ ] 能实现文件上传下载
- [ ] 能实现操作日志记录
- [ ] 掌握接口文档的编写

### 第9阶段：高级特性

- [ ] 理解Quartz定时任务
- [ ] 能使用代码生成器
- [ ] 能编写Swagger接口文档
- [ ] 掌握系统性能优化

## 💪 学习心态

- **保持耐心**：学习需要时间，不要着急
- **积极思考**：多问为什么，不要死记硬背
- **勤于实践**：只看不练永远学不会
- **持续学习**：技术在不断发展，要保持学习

---

## 📊 学习进度记录

### 第1周

| 日期 | 学习内容 | 学习时长 | 完成度 | 备注 |
|-----|---------|---------|--------|------|
| 2025-11-03 | 第1阶段：基础搭建 | 4小时 | 100% | 创建多模块项目，成功启动 |
| 2025-11-05 | 第2.1阶段：统一响应结果 | 1小时 | 100% | AjaxResult、HttpStatus |
| 2025-11-05 | 第2.2阶段：基础工具类 | 2小时 | 100% | StringUtils、DateUtils、ServletUtils |
| 2025-11-05 | 第2.3阶段：通用实体类 | 1小时 | 100% | BaseEntity、分页封装 |
| 2025-11-05 | 第2.4阶段：异常处理 | 2小时 | 100% | 全局异常处理器 |
| 2025-11-05 | 第2.5阶段：常量定义 | 30分钟 | 100% | 常量类设计 |
| 2025-11-05 | 前后端联调配置 | 1小时 | 100% | CORS、Vite代理 |
| **2025-11-05** | **第2阶段完成** | **7.5小时** | **100%** | **🎉完成！** |
| **2025-11-05** | **第3阶段完成** | **3小时** | **100%** | **MyBatis-Plus、Druid** |
| **2025-11-06** | **第4阶段完成** | **3小时** | **100%** | **Redis缓存** |
| **2025-11-06** | **第5阶段完成** | **6小时** | **100%** | **🎉完成！** |

### 第2周

| 日期 | 学习内容 | 学习时长 | 完成度 | 备注 |
|-----|---------|---------|--------|------|
| - | - | - | - | - |

### 学习笔记

#### 第1阶段笔记

**Maven多模块项目：**
- 父POM通过 `<dependencyManagement>` 统一管理依赖版本
- 子模块通过 `<parent>` 继承父POM，不需要指定版本号
- 模块依赖关系：admin → framework → system → common

**Spring Boot启动：**
- `@SpringBootApplication` 包含配置类、自动配置、组件扫描
- 通过 `exclude` 可以排除不需要的自动配置（如DataSource）

#### 第2.1阶段笔记（统一响应结果）

**AjaxResult设计要点：**
- 继承HashMap提供灵活性，可以动态添加字段
- 使用静态工厂方法（success()、error()）简化对象创建
- 重写put()方法支持链式调用
- 统一响应格式：{ code, msg, data }

**HTTP状态码规范：**
- 2xx：成功（200成功、201创建、204无内容）
- 4xx：客户端错误（400参数错误、401未授权、404未找到）
- 5xx：服务器错误（500内部错误）
- 6xx：自定义业务状态码（601警告）

#### 第2.2阶段笔记（基础工具类）

**StringUtils（字符串工具）：**
- 继承 Apache Commons Lang3 的 StringUtils
- 添加项目特定方法：format()占位符替换、toUnderScoreCase()驼峰转下划线
- 提供多种判空方法：isEmpty()、isBlank()、isNotEmpty()、isNotBlank()
- 支持集合、Map、数组的判空

**DateUtils（日期工具）：**
- 使用 Java 8 的 LocalDateTime/LocalDate API
- 提供 Date 与 LocalDateTime 互转方法
- DateTimeFormatter 是线程安全的，可以声明为静态变量
- 统一日期格式常量：YYYY_MM_DD、YYYY_MM_DD_HH_MM_SS 等
- 提供日期计算方法：addDays()、addMonths()、daysBetween() 等

**ServletUtils（Servlet工具）：**
- 使用 RequestContextHolder 获取当前请求上下文（线程安全）
- 在Service层或工具类中获取Request/Response，无需传参
- 提供参数获取的便捷方法，支持类型转换和默认值
- getClientIP() 考虑了代理和负载均衡，从多个Header中获取真实IP

**依赖管理经验：**
- 工具类需要添加对应的依赖（Apache Commons Lang3）
- 在父POM的 `<dependencyManagement>` 中声明版本
- 在子模块的 `<dependencies>` 中引入（不需要版本号）

#### 第2.3阶段笔记（通用实体类）

**BaseEntity（基础实体类）：**
- 所有实体类的父类，继承后自动拥有通用字段
- 包含字段：createBy、createTime、updateBy、updateTime、remark
- 使用 @JsonFormat 统一日期格式化
- 实现 Serializable 支持序列化
- 提供 params 字段存储额外参数（不映射数据库）

**PageDomain（分页参数）：**
- pageNum：当前页码（默认1）
- pageSize：每页大小（默认10）
- orderByColumn：排序字段（支持驼峰格式）
- isAsc：排序方式（asc/desc）
- reasonable：是否开启合理化查询

**TableDataInfo（分页响应）：**
- total：总记录数
- rows：数据列表
- code：状态码
- msg：提示信息
- 统一分页查询的响应格式

**BaseController（Controller基类）：**
- 提供 getDataTable() 快速构建分页响应
- 提供 toAjax() 判断操作结果
- 所有Controller继承此类获得通用方法

**前后端联调配置：**
- 后端：CorsConfig 配置跨域，允许前端访问
- 前端：vite.config.ts 配置代理，/dev-api 转发到后端
- 解决跨域问题的两种方案：CORS 和代理

#### 第2.4阶段笔记（异常处理）

**BaseException（基础异常）：**
- 所有自定义异常的父类
- 继承 RuntimeException（运行时异常，不需要强制catch）
- 支持扩展信息：module（模块）、code（错误码）、args（参数）
- 支持链式调用设置异常信息

**ServiceException（业务异常）：**
- 用于业务逻辑中的可预见异常
- 支持错误码和详细错误信息
- 使用场景：用户不存在、权限不足、参数错误等
- 简化异常抛出：throw new ServiceException("用户不存在")

**GlobalExceptionHandler（全局异常处理器）：**
- @RestControllerAdvice：全局异常处理注解，自动扫描所有Controller
- @ExceptionHandler：指定处理的异常类型
- 统一将异常转换为 AjaxResult 响应格式
- 记录异常日志，便于问题排查和定位
- 异常处理优先级：业务异常 > 参数校验异常 > 运行时异常 > 系统异常

**异常处理最佳实践：**
- 不要在Controller层catch异常，让GlobalExceptionHandler统一处理
- 业务异常使用 ServiceException，系统异常使用 Exception
- 生产环境不要暴露详细的异常堆栈信息
- 所有异常都要记录日志

**异常处理流程：**
```
Controller 抛出异常
  ↓
GlobalExceptionHandler 捕获
  ↓
转换为 AjaxResult
  ↓
记录日志
  ↓
返回统一响应
```

#### 第2.5阶段笔记（常量定义）

**常量类设计原则：**
- 按模块划分：Constants（通用）、UserConstants（用户）、CacheConstants（缓存）
- 命名规范：全大写、下划线分隔、见名知意
- 分类清晰：状态、类型、配置、Key前缀等
- 消除魔法值：用常量替代硬编码的字符串和数字

**Constants（通用常量）：**
- 字符集：UTF8、GBK
- 协议：HTTP、HTTPS
- 状态码：SUCCESS、FAIL
- Token相关：TOKEN、TOKEN_PREFIX、LOGIN_USER_KEY
- 验证码过期时间：CAPTCHA_EXPIRATION

**UserConstants（用户常量）：**
- 用户状态：USER_NORMAL、USER_DISABLE
- 角色状态：ROLE_NORMAL、ROLE_DISABLE
- 菜单类型：TYPE_DIR（目录）、TYPE_MENU（菜单）、TYPE_BUTTON（按钮）
- 长度限制：USERNAME_MIN_LENGTH、PASSWORD_MAX_LENGTH
- 超级管理员：ADMIN_ID = 1L

**CacheConstants（缓存常量）：**
- Key前缀：LOGIN_TOKEN_KEY、CAPTCHA_CODE_KEY、SYS_CONFIG_KEY、SYS_DICT_KEY
- 过期时间：LOGIN_TOKEN_EXPIRATION（30分钟）、CAPTCHA_EXPIRATION（2分钟）
- 安全配置：PWD_ERR_MAX_COUNT（密码错误最大次数）

**使用常量 vs 魔法值：**
```java
// ❌ 魔法值（不推荐）
if (status.equals("0"))
redisCache.set("user:" + id)
if (userId == 1)

// ✅ 使用常量（推荐）
if (UserConstants.USER_NORMAL.equals(status))
redisCache.set(CacheConstants.USER_INFO_KEY + id)
if (UserConstants.ADMIN_ID.equals(userId))
```

#### 第3阶段笔记（数据访问层）

**MyBatis-Plus基础：**
- BaseMapper提供基础CRUD方法，无需编写XML
- LambdaQueryWrapper类型安全，避免字段名写错
- IService/ServiceImpl提供业务层封装
- Page对象实现分页查询
- 逻辑删除：软删除，不是物理删除

**Druid数据源：**
- 阿里开源的数据库连接池
- 提供SQL监控、性能统计功能
- 访问/druid查看监控面板
- 配置initial-size、max-active等参数

**实体类设计：**
- 使用@TableName指定表名
- @TableId标识主键，设置自增策略
- @TableField指定字段映射
- @TableLogic标识逻辑删除字段
- 继承BaseEntity获得通用字段

#### 第4阶段笔记（Redis缓存）

**Redis配置：**
- 使用Lettuce作为Redis客户端（Spring Boot默认）
- RedisTemplate：Redis操作模板类
- 序列化器选择：Key用String，Value用Fastjson2
- Fastjson2序列化性能好，支持复杂对象

**RedisCache工具类设计：**
- 封装RedisTemplate，提供更简洁的API
- 泛型方法，自动类型转换
- 统一异常处理，返回默认值
- 40+个方法，覆盖常用操作

**Redis数据类型：**
- **String**：最基本的类型，可存储字符串、数字、对象
  - 使用场景：缓存、计数器、分布式锁
- **List**：有序列表，支持头尾操作
  - 使用场景：消息队列、最新消息列表
- **Hash**：哈希表，适合存储对象
  - 使用场景：用户信息、商品信息
- **Set**：无序不重复集合
  - 使用场景：标签、好友列表、去重
- **ZSet**：有序集合（本阶段未涉及）
  - 使用场景：排行榜、延时队列

**过期策略：**
- 设置过期时间避免内存溢出
- 支持秒、分钟、小时等时间单位
- getExpire()获取剩余时间
- -1表示永不过期，-2表示key不存在

**对象序列化：**
- Fastjson2自动序列化Java对象为JSON
- WriteClassName特性保留类型信息
- SupportAutoType特性支持自动类型转换
- 反序列化时自动还原为原始类型


---

**记住：学习的目的不是完成任务，而是真正掌握知识！**

加油！💪

