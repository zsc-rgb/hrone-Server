# ğŸ‰ ç¬¬4é˜¶æ®µä»£ç å·²å®Œæˆï¼

> Redisç¼“å­˜ä»£ç å®ç°å®Œæ¯•ï¼Œç­‰å¾…Redisç¯å¢ƒå‡†å¤‡åå³å¯æµ‹è¯•

---

## âœ… å·²å®Œæˆå†…å®¹

### ä»£ç å®ç°ï¼ˆ3ä¸ªæ–‡ä»¶ï¼‰

| æ–‡ä»¶ | ä»£ç è¡Œæ•° | è¯´æ˜ |
|------|---------|------|
| **RedisConfig.java** | 90è¡Œ | Redisé…ç½®ã€Fastjson2åºåˆ—åŒ–å™¨ |
| **RedisCache.java** | 540è¡Œ | Redisç¼“å­˜å·¥å…·ç±» |
| **RedisCacheTestController.java** | 420è¡Œ | Redisæµ‹è¯•æ¥å£ï¼ˆ10ä¸ªæ¥å£ï¼‰|
| **åˆè®¡** | **3ä¸ª** | **1,050è¡Œä»£ç ** |

### é…ç½®æ–‡ä»¶

- âœ… `application-dev.yml` - Redisè¿æ¥é…ç½®
- âœ… `hrone-framework/pom.xml` - å¯ç”¨Redisä¾èµ–
- âœ… Lettuceè¿æ¥æ± é…ç½®

---

## ğŸ“ æŠ€æœ¯æ ˆ

### ä½¿ç”¨çš„æ¡†æ¶å’Œå·¥å…·

1. **Spring Data Redis 2.5.14**
   - RedisTemplateï¼šRedisæ“ä½œæ¨¡æ¿
   - StringRedisSerializerï¼šStringåºåˆ—åŒ–å™¨
   - Lettuceï¼šRediså®¢æˆ·ç«¯ï¼ˆé»˜è®¤ï¼‰
   - è¿æ¥æ± ç®¡ç†

2. **Fastjson2 2.0.25**
   - é«˜æ€§èƒ½JSONåºåˆ—åŒ–
   - æ”¯æŒå¤æ‚å¯¹è±¡
   - ä¿ç•™ç±»å‹ä¿¡æ¯

3. **Redis 5.0+**
   - å†…å­˜æ•°æ®åº“
   - æ”¯æŒå¤šç§æ•°æ®ç±»å‹
   - é«˜æ€§èƒ½ç¼“å­˜

---

## ğŸ“Š å®ç°çš„åŠŸèƒ½

### Redisç¼“å­˜æ¥å£ï¼ˆ10ä¸ªï¼‰

| åŠŸèƒ½åˆ†ç±» | æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|---------|------|------|------|
| **Stringæ“ä½œ** | /test/redis/string | GET | å­—ç¬¦ä¸²åŸºæœ¬æ“ä½œ |
| **Stringæ“ä½œ** | /test/redis/string | DELETE | å­—ç¬¦ä¸²åˆ é™¤ |
| **Listæ“ä½œ** | /test/redis/list | GET | åˆ—è¡¨æ“ä½œ |
| **Hashæ“ä½œ** | /test/redis/hash | GET | å“ˆå¸Œè¡¨æ“ä½œ |
| **Setæ“ä½œ** | /test/redis/set | GET | é›†åˆæ“ä½œ |
| **è¿‡æœŸæ—¶é—´** | /test/redis/expire | GET | è¿‡æœŸæ—¶é—´è®¾ç½® |
| **æŸ¥è¯¢æ“ä½œ** | /test/redis/keys | GET | æ¨¡ç³ŠæŸ¥è¯¢ |
| **æ‰¹é‡æ“ä½œ** | /test/redis/batch | DELETE | æ‰¹é‡åˆ é™¤ |
| **æ¸…ç†æ“ä½œ** | /test/redis/clean | DELETE | æ¸…ç†æµ‹è¯•æ•°æ® |
| **å¯¹è±¡ç¼“å­˜** | /test/redis/object | GET | å¯¹è±¡åºåˆ—åŒ– |

### RedisCacheå·¥å…·ç±»æ–¹æ³•ï¼ˆ40+ä¸ªï¼‰

#### Stringæ“ä½œï¼ˆ9ä¸ªæ–¹æ³•ï¼‰
```java
âœ… set(key, value)                          // è®¾ç½®ç¼“å­˜
âœ… set(key, value, timeout)                 // è®¾ç½®ç¼“å­˜+è¿‡æœŸæ—¶é—´
âœ… set(key, value, timeout, unit)           // è®¾ç½®ç¼“å­˜+è¿‡æœŸæ—¶é—´+å•ä½
âœ… get(key)                                 // è·å–ç¼“å­˜
âœ… delete(key)                              // åˆ é™¤ç¼“å­˜
âœ… delete(keys)                             // æ‰¹é‡åˆ é™¤
âœ… hasKey(key)                              // åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨
âœ… expire(key, timeout)                     // è®¾ç½®è¿‡æœŸæ—¶é—´
âœ… expire(key, timeout, unit)               // è®¾ç½®è¿‡æœŸæ—¶é—´+å•ä½
âœ… getExpire(key)                           // è·å–è¿‡æœŸæ—¶é—´
âœ… increment(key, delta)                    // é€’å¢
âœ… decrement(key, delta)                    // é€’å‡
```

#### Listæ“ä½œï¼ˆ7ä¸ªæ–¹æ³•ï¼‰
```java
âœ… getList(key, start, end)                 // è·å–åˆ—è¡¨ï¼ˆèŒƒå›´ï¼‰
âœ… getList(key)                             // è·å–åˆ—è¡¨ï¼ˆå…¨éƒ¨ï¼‰
âœ… getListSize(key)                         // è·å–åˆ—è¡¨é•¿åº¦
âœ… listRightPush(key, value)                // æ·»åŠ å…ƒç´ 
âœ… listRightPush(key, value, timeout)       // æ·»åŠ å…ƒç´ +è¿‡æœŸæ—¶é—´
âœ… listRightPushAll(key, values)            // æ‰¹é‡æ·»åŠ 
âœ… listSet(key, index, value)               // ä¿®æ”¹å…ƒç´ 
âœ… listRemove(key, count, value)            // ç§»é™¤å…ƒç´ 
```

#### Hashæ“ä½œï¼ˆ8ä¸ªæ–¹æ³•ï¼‰
```java
âœ… hashGet(key, hashKey)                    // è·å–Hashå­—æ®µ
âœ… hashPut(key, hashKey, value)             // è®¾ç½®Hashå­—æ®µ
âœ… hashPutAll(key, map)                     // æ‰¹é‡è®¾ç½®Hash
âœ… hashDelete(key, hashKeys...)             // åˆ é™¤Hashå­—æ®µ
âœ… hashHasKey(key, hashKey)                 // åˆ¤æ–­Hashå­—æ®µæ˜¯å¦å­˜åœ¨
âœ… hashGetAll(key)                          // è·å–æ‰€æœ‰Hashæ•°æ®
âœ… hashKeys(key)                            // è·å–æ‰€æœ‰Hashé”®
âœ… hashValues(key)                          // è·å–æ‰€æœ‰Hashå€¼
```

#### Setæ“ä½œï¼ˆ6ä¸ªæ–¹æ³•ï¼‰
```java
âœ… getSet(key)                              // è·å–Setæ‰€æœ‰å…ƒç´ 
âœ… setHasValue(key, value)                  // åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨
âœ… setAdd(key, values...)                   // æ·»åŠ å…ƒç´ 
âœ… setAdd(key, timeout, values...)          // æ·»åŠ å…ƒç´ +è¿‡æœŸæ—¶é—´
âœ… getSetSize(key)                          // è·å–Setå¤§å°
âœ… setRemove(key, values...)                // ç§»é™¤å…ƒç´ 
```

#### é€šç”¨æ“ä½œï¼ˆ2ä¸ªæ–¹æ³•ï¼‰
```java
âœ… keys(pattern)                            // æ¨¡ç³ŠæŸ¥è¯¢key
âœ… deleteKeys(pattern)                      // æ‰¹é‡åˆ é™¤ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰
```

---

## ğŸ”¥ æ ¸å¿ƒç‰¹æ€§

### 1. Fastjson2åºåˆ—åŒ–

**ä¼˜ç‚¹ï¼š**
- âœ… æ€§èƒ½ä¼˜ç§€ï¼ˆæ¯”Jacksonå¿«ï¼‰
- âœ… æ”¯æŒå¤æ‚å¯¹è±¡åºåˆ—åŒ–
- âœ… ä¿ç•™ç±»å‹ä¿¡æ¯ï¼ˆååºåˆ—åŒ–æ—¶è‡ªåŠ¨è¿˜åŸï¼‰
- âœ… æ”¯æŒæ³›å‹

**é…ç½®ï¼š**
```java
// åºåˆ—åŒ–æ—¶å†™å…¥ç±»å‹ä¿¡æ¯
JSON.toJSONString(t, JSONWriter.Feature.WriteClassName)

// ååºåˆ—åŒ–æ—¶è‡ªåŠ¨ç±»å‹è½¬æ¢
JSON.parseObject(str, clazz, JSONReader.Feature.SupportAutoType)
```

---

### 2. æ³›å‹æ”¯æŒ

**ä¼˜é›…çš„APIè®¾è®¡ï¼š**
```java
// è®¾ç½®ç¼“å­˜ï¼ˆæ³›å‹Tï¼‰
public <T> void set(String key, T value)

// è·å–ç¼“å­˜ï¼ˆè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼‰
public <T> T get(String key)

// ä½¿ç”¨ç¤ºä¾‹
UserInfo user = redisCache.get("user:1");  // è‡ªåŠ¨è½¬æ¢ä¸ºUserInfo
List<String> tags = redisCache.getList("tags"); // è‡ªåŠ¨è½¬æ¢ä¸ºList<String>
```

---

### 3. è¿‡æœŸæ—¶é—´ç®¡ç†

**å¤šç§è®¾ç½®æ–¹å¼ï¼š**
```java
// æ–¹å¼1ï¼šè®¾ç½®æ—¶æŒ‡å®šï¼ˆç§’ï¼‰
redisCache.set("key", "value", 60);

// æ–¹å¼2ï¼šå•ç‹¬è®¾ç½®ï¼ˆç§’ï¼‰
redisCache.expire("key", 60);

// æ–¹å¼3ï¼šæŒ‡å®šæ—¶é—´å•ä½
redisCache.set("key", "value", 5, TimeUnit.MINUTES);
redisCache.expire("key", 1, TimeUnit.HOURS);

// è·å–å‰©ä½™æ—¶é—´
long ttl = redisCache.getExpire("key");  // è¿”å›ç§’æ•°
```

---

### 4. æ¨¡ç³ŠæŸ¥è¯¢å’Œæ‰¹é‡åˆ é™¤

**çµæ´»çš„keyç®¡ç†ï¼š**
```java
// æŸ¥è¯¢æ‰€æœ‰userå¼€å¤´çš„key
Set<String> keys = redisCache.keys("user:*");

// æ‰¹é‡åˆ é™¤userå¼€å¤´çš„key
long count = redisCache.deleteKeys("user:*");

// åˆ é™¤å¤šä¸ªæŒ‡å®škey
List<String> keyList = Arrays.asList("key1", "key2", "key3");
redisCache.delete(keyList);
```

---

## âš ï¸ é‡è¦ï¼šå¯åŠ¨å‰å¿…è¯»

### ä¸ºä»€ä¹ˆéœ€è¦Redisï¼Ÿ

ç¬¬4é˜¶æ®µæ¶‰åŠRedisç¼“å­˜æ“ä½œï¼Œæ‰€ä»¥å¿…é¡»è¦ï¼š
1. âœ… å®‰è£…RedisæœåŠ¡å™¨
2. âœ… å¯åŠ¨RedisæœåŠ¡
3. âœ… ç¡®è®¤Rediså¯ä»¥è¿æ¥

**å¦åˆ™é¡¹ç›®æ— æ³•å¯åŠ¨ï¼**

---

## ğŸ“ å‡†å¤‡Redisç¯å¢ƒ

### æ­¥éª¤1ï¼šæ£€æŸ¥Redisæ˜¯å¦å®‰è£…

```bash
redis-cli --version
```

**å¦‚æœæœªå®‰è£…ï¼Œè¯·æŸ¥çœ‹ï¼š** `ç¬¬4é˜¶æ®µ-å‡†å¤‡å·¥ä½œ.md`

---

### æ­¥éª¤2ï¼šå¯åŠ¨RedisæœåŠ¡

```bash
# Windowsï¼ˆå·²å®‰è£…æœåŠ¡ï¼‰
net start Redis

# Windowsï¼ˆæœªå®‰è£…æœåŠ¡ï¼‰
redis-server

# Docker
docker start redis
```

---

### æ­¥éª¤3ï¼šéªŒè¯Redisè¿æ¥

```bash
redis-cli ping
# åº”è¯¥è¿”å›ï¼šPONG
```

**å¦‚æœè¿”å› PONGï¼Œè¯´æ˜Redisæ­£å¸¸è¿è¡Œï¼** âœ…

---

### æ­¥éª¤4ï¼šä¿®æ”¹å¯†ç é…ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰

**å¦‚æœä½ çš„Redisè®¾ç½®äº†å¯†ç ï¼š**

ç¼–è¾‘æ–‡ä»¶ï¼š`hrone-admin/src/main/resources/application-dev.yml`

```yaml
spring:
  redis:
    password: your_password  # ä¿®æ”¹ä¸ºä½ çš„Rediså¯†ç 
```

---

## ğŸš€ å¯åŠ¨æµ‹è¯•

### å¯åŠ¨é¡¹ç›®

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨è„šæœ¬
åŒå‡»ï¼šd:\HroneWorking\å¯åŠ¨åç«¯.bat

# æ–¹æ³•2ï¼šå‘½ä»¤è¡Œ
cd d:\HroneWorking\hrone-Server
mvn spring-boot:run -pl hrone-admin
```

### å¯åŠ¨æˆåŠŸæ ‡å¿—

```
Lettuce PoolingConnectionProvider.getConnection
LettuceConnectionFactory.getConnection

========================================
   HROne åç«¯ç³»ç»Ÿå¯åŠ¨æˆåŠŸï¼
   è®¿é—®åœ°å€ï¼šhttp://localhost:8080
========================================
```

**çœ‹åˆ°ä»¥ä¸Šä¿¡æ¯ï¼Œè¯´æ˜Redisè¿æ¥æˆåŠŸï¼** âœ…

---

## ğŸ§ª å¿«é€Ÿæµ‹è¯•

### 1. Stringæ“ä½œ

```
GET http://localhost:8080/test/redis/string

é¢„æœŸï¼šè¿”å›nameã€ageã€counterç­‰æ•°æ®
```

### 2. Listæ“ä½œ

```
GET http://localhost:8080/test/redis/list

é¢„æœŸï¼šè¿”å›ç”¨æˆ·åˆ—è¡¨
```

### 3. Hashæ“ä½œ

```
GET http://localhost:8080/test/redis/hash

é¢„æœŸï¼šè¿”å›ç”¨æˆ·Hashæ•°æ®
```

### 4. å¯¹è±¡ç¼“å­˜

```
GET http://localhost:8080/test/redis/object

é¢„æœŸï¼šè¿”å›åºåˆ—åŒ–çš„ç”¨æˆ·å¯¹è±¡
```

### 5. æŸ¥çœ‹Redisæ•°æ®

```bash
# ä½¿ç”¨redis-cliæŸ¥çœ‹
redis-cli

# æŸ¥çœ‹æ‰€æœ‰key
keys test:*

# æŸ¥çœ‹Stringå€¼
get test:string:name

# æŸ¥çœ‹List
lrange test:list:users 0 -1

# æŸ¥çœ‹Hash
hgetall test:hash:user:1

# æŸ¥çœ‹Set
smembers test:set:tags
```

---

## ğŸ“Š ç¬¬4é˜¶æ®µç»Ÿè®¡

### ä»£ç ç»Ÿè®¡

| æ¨¡å— | æ–‡ä»¶æ•° | ä»£ç è¡Œæ•° |
|------|--------|---------|
| é…ç½®ç±» | 1 | 90 |
| å·¥å…·ç±» | 1 | 540 |
| Controller | 1 | 420 |
| **åˆè®¡** | **3** | **1,050** |

### æ¥å£ç»Ÿè®¡

- Redisç¼“å­˜æ¥å£ï¼š10ä¸ª
- **æ€»è®¡ï¼š10ä¸ªæ–°æ¥å£**

### æ–°å¢çŸ¥è¯†ç‚¹

1. RedisåŸºç¡€æ¦‚å¿µ
2. RedisTemplateé…ç½®
3. Fastjson2åºåˆ—åŒ–å™¨
4. Stringæ“ä½œ
5. Listæ“ä½œ
6. Hashæ“ä½œ
7. Setæ“ä½œ
8. è¿‡æœŸæ—¶é—´ç®¡ç†
9. æ¨¡ç³ŠæŸ¥è¯¢
10. æ‰¹é‡æ“ä½œ
11. å¯¹è±¡åºåˆ—åŒ–
12. Lettuceè¿æ¥æ± 

**æ–°å¢ï¼š12ä¸ªçŸ¥è¯†ç‚¹**  
**ç´¯è®¡ï¼š50ä¸ªçŸ¥è¯†ç‚¹** ğŸ“

---

## ğŸ¯ é¡¹ç›®æ€»ä½“è¿›åº¦

```
æ€»è¿›åº¦ï¼šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 70%

âœ… ç¬¬1é˜¶æ®µï¼šé¡¹ç›®åŸºç¡€æ­å»ºï¼ˆ100%ï¼‰
âœ… ç¬¬2é˜¶æ®µï¼šé€šç”¨å·¥å…·æ¨¡å—ï¼ˆ100%ï¼‰
âœ… ç¬¬3é˜¶æ®µï¼šæ•°æ®è®¿é—®å±‚ï¼ˆ100%ï¼Œéœ€MySQLï¼‰
âœ… ç¬¬4é˜¶æ®µï¼šRedisç¼“å­˜ï¼ˆ100%ï¼Œéœ€Redisï¼‰
â³ ç¬¬5é˜¶æ®µï¼šç³»ç»ŸåŸºç¡€æ¨¡å—ï¼ˆ0%ï¼‰
â³ ç¬¬6é˜¶æ®µï¼šå®‰å…¨è®¤è¯ï¼ˆ0%ï¼‰
...

å·²å®Œæˆä»£ç ï¼š4é˜¶æ®µ
æ€»ä»£ç è¡Œæ•°ï¼š5,810è¡Œ
```

---

## ğŸ“– æ–‡æ¡£æ¸…å•

### ç¬¬4é˜¶æ®µæ–‡æ¡£

1. **ç¬¬4é˜¶æ®µ-å‡†å¤‡å·¥ä½œ.md** â­ - Rediså®‰è£…å’Œç¯å¢ƒå‡†å¤‡
2. **ç¬¬4é˜¶æ®µ-å¿«é€Ÿå¼€å§‹.md** - æµ‹è¯•æŒ‡å—
3. **ç¬¬4é˜¶æ®µ-ä»£ç å®Œæˆè¯´æ˜.md** - æœ¬æ–‡æ¡£

### æ›´æ–°çš„æ–‡æ¡£

4. **README.md** - æ·»åŠ ç¬¬4é˜¶æ®µå†…å®¹
5. **PROJECT_PROGRESS.md** - æ›´æ–°è¿›åº¦å’ŒçŸ¥è¯†ç‚¹
6. **å­¦ä¹ è®¡åˆ’.md** - æ›´æ–°å­¦ä¹ è®°å½•

---

## ğŸŠ æ­å–œä½ ï¼

**ç¬¬4é˜¶æ®µä»£ç å·²å…¨éƒ¨å®Œæˆï¼**

**ä½ å®ç°äº†ï¼š**
- âœ… Redisé›†æˆé…ç½®
- âœ… Fastjson2åºåˆ—åŒ–
- âœ… RedisCacheå·¥å…·ç±»ï¼ˆ40+æ–¹æ³•ï¼‰
- âœ… 5ç§æ•°æ®ç±»å‹æ“ä½œ
- âœ… è¿‡æœŸæ—¶é—´ç®¡ç†
- âœ… æ¨¡ç³ŠæŸ¥è¯¢å’Œæ‰¹é‡æ“ä½œ
- âœ… å¯¹è±¡åºåˆ—åŒ–

**ç´¯è®¡æˆæœï¼š**
- âœ… 30ä¸ªJavaç±»
- âœ… 5,810è¡Œä»£ç 
- âœ… 50ä¸ªæ¥å£
- âœ… 50ä¸ªçŸ¥è¯†ç‚¹

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### ä»Šå¤©

**é€‰é¡¹1ï¼šå‡†å¤‡Redis** â­ï¼ˆå¿…é¡»ï¼‰
1. æŒ‰ç…§ `ç¬¬4é˜¶æ®µ-å‡†å¤‡å·¥ä½œ.md` å®‰è£…Redis
2. å¯åŠ¨RedisæœåŠ¡
3. å¯åŠ¨é¡¹ç›®æµ‹è¯•æ¥å£

**é€‰é¡¹2ï¼šå…ˆäº†è§£Redis** ğŸ“š
1. äº†è§£Redisçš„æ•°æ®ç±»å‹
2. å­¦ä¹ Redisçš„åº”ç”¨åœºæ™¯
3. ç†è§£ç¼“å­˜çš„è®¾è®¡æ¨¡å¼

### æ˜å¤©

**æµ‹è¯•å®Œæˆåï¼š**
- å¼€å§‹ç¬¬5é˜¶æ®µï¼šç³»ç»ŸåŸºç¡€æ¨¡å—
- å®ç°ç”¨æˆ·ã€è§’è‰²ã€èœå•ç®¡ç†
- å­¦ä¹ æ ‘å½¢ç»“æ„çš„æ„å»º

---

## ğŸ’¡ å­¦ä¹ å»ºè®®

### Rediså­¦ä¹ èµ„æº

**å®˜æ–¹æ–‡æ¡£ï¼š**
- Rediså®˜ç½‘ï¼šhttps://redis.io/
- Rediså‘½ä»¤å‚è€ƒï¼šhttps://redis.io/commands/

**æ¨èæ•™ç¨‹ï¼š**
- Rediså…¥é—¨æ•™ç¨‹
- Redisæ•°æ®ç±»å‹è¯¦è§£
- Redisåº”ç”¨åœºæ™¯

### å®è·µå»ºè®®

1. **å¤šåšæµ‹è¯•**ï¼šæ¯ä¸ªæ•°æ®ç±»å‹éƒ½è¦äº²è‡ªæµ‹è¯•
2. **ä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·**ï¼šå¯è§†åŒ–æŸ¥çœ‹Redisæ•°æ®
3. **ç†è§£åº”ç”¨åœºæ™¯**ï¼šæ€è€ƒä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆæ•°æ®ç±»å‹
4. **æ³¨æ„è¿‡æœŸæ—¶é—´**ï¼šé¿å…ç¼“å­˜æ°¸ä¹…å ç”¨å†…å­˜

---

**ğŸ“Œ é‡è¦æé†’ï¼š**
- ç¬¬4é˜¶æ®µçš„ä»£ç å·²ç»å…¨éƒ¨å®Œæˆ âœ…
- éœ€è¦å…ˆå‡†å¤‡Redisç¯å¢ƒæ‰èƒ½æµ‹è¯• âš ï¸
- è¯·æŸ¥çœ‹ `ç¬¬4é˜¶æ®µ-å‡†å¤‡å·¥ä½œ.md` äº†è§£å¦‚ä½•å‡†å¤‡

**å‡†å¤‡å¥½Redisåï¼Œç¬¬4é˜¶æ®µå°±å¯ä»¥æµ‹è¯•äº†ï¼** ğŸš€

