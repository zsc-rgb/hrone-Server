# 🧪 第2阶段 - 全部测试接口速查表

> 快速查找和测试所有接口

---

## 📊 接口分类

### 共31个测试接口 ✅

| 分类 | 数量 | 访问入口 |
|------|------|---------|
| 统一响应测试 | 8个 | GET /test |
| 工具类测试 | 5个 | GET /test/utils |
| 分页测试 | 5个 | GET /test/page |
| 异常处理测试 | 8个 | GET /test/exception |
| 常量测试 | 5个 | GET /test/constants |

---

## 🚀 一键测试脚本

### 在浏览器 F12 控制台执行

```javascript
// 测试所有核心接口
const testAPIs = async () => {
  console.log('========== 开始测试 ==========\n');
  
  // 1. 统一响应测试
  console.log('1️⃣ 统一响应测试');
  let res1 = await fetch('/dev-api/test/hello').then(r => r.json());
  console.log('✅ Hello接口：', res1);
  
  // 2. 工具类测试
  console.log('\n2️⃣ 工具类测试');
  let res2 = await fetch('/dev-api/test/utils/string').then(r => r.json());
  console.log('✅ StringUtils：', res2);
  
  let res3 = await fetch('/dev-api/test/utils/date').then(r => r.json());
  console.log('✅ DateUtils：', res3);
  
  // 3. 分页测试
  console.log('\n3️⃣ 分页测试');
  let res4 = await fetch('/dev-api/test/page/list').then(r => r.json());
  console.log('✅ 分页查询：', res4);
  
  // 4. 异常处理测试
  console.log('\n4️⃣ 异常处理测试');
  let res5 = await fetch('/dev-api/test/exception/service').then(r => r.json());
  console.log('✅ 业务异常：', res5);
  
  // 5. 常量测试
  console.log('\n5️⃣ 常量测试');
  let res6 = await fetch('/dev-api/test/constants/usage').then(r => r.json());
  console.log('✅ 常量使用：', res6);
  
  console.log('\n========== 测试完成 ==========');
  console.log('\n🎉 第2阶段全部功能测试通过！');
};

// 执行测试
testAPIs();
```

---

## 📋 接口详细列表

### 1. 统一响应测试（8个）

| 序号 | 接口 | 方法 | 说明 | 状态码 |
|-----|------|------|------|--------|
| 1 | `/test` | GET | 接口列表 | 200 |
| 2 | `/test/hello` | GET | Hello接口 | 200 |
| 3 | `/test/success` | GET | 成功响应 | 200 |
| 4 | `/test/success-data` | GET | 成功响应带数据 | 200 |
| 5 | `/test/error` | GET | 错误响应 | 500 |
| 6 | `/test/custom` | GET | 自定义状态码 | 601 |
| 7 | `/test/chain` | GET | 链式调用 | 200 |
| 8 | `/test/health` | GET | 健康检查 | 200 |

**文档：** `第2阶段-快速测试.md`

---

### 2. 工具类测试（5个）

| 序号 | 接口 | 方法 | 说明 | 参数 |
|-----|------|------|------|------|
| 1 | `/test/utils` | GET | 接口列表 | - |
| 2 | `/test/utils/string` | GET | StringUtils测试 | - |
| 3 | `/test/utils/date` | GET | DateUtils测试 | - |
| 4 | `/test/utils/servlet` | GET | ServletUtils测试 | username, age, active |
| 5 | `/test/utils/comprehensive` | GET | 综合测试 | username |

**文档：** `第2阶段-快速测试.md`

---

### 3. 分页测试（5个）

| 序号 | 接口 | 方法 | 说明 | 返回数量 |
|-----|------|------|------|---------|
| 1 | `/test/page` | GET | 接口列表 | - |
| 2 | `/test/page/list` | GET | 简单分页 | 10条 |
| 3 | `/test/page/bigList` | GET | 大数据量 | 100条 |
| 4 | `/test/page/baseFields` | GET | BaseEntity字段测试 | 2条 |
| 5 | `/test/page/empty` | GET | 空数据测试 | 0条 |

**文档：** `第2.3阶段-通用实体类测试.md`

---

### 4. 异常处理测试（8个）

| 序号 | 接口 | 方法 | 说明 | 错误码 |
|-----|------|------|------|--------|
| 1 | `/test/exception` | GET | 接口列表 | 200 |
| 2 | `/test/exception/service` | GET | 业务异常（默认） | 500 |
| 3 | `/test/exception/service403` | GET | 业务异常（自定义） | 403 |
| 4 | `/test/exception/nullpointer` | GET | 空指针异常 | 500 |
| 5 | `/test/exception/arrayindex` | GET | 数组越界 | 500 |
| 6 | `/test/exception/arithmetic` | GET | 除零异常 | 500 |
| 7 | `/test/exception/classcast` | GET | 类型转换 | 500 |
| 8 | `/test/exception/normal/{id}` | GET | 正常业务测试 | 200/400/404 |
| 9 | `/test/exception/chain` | GET | 异常链测试 | 500 |

**文档：** `第2.4阶段-异常处理测试.md`

---

### 5. 常量测试（5个接口）

| 序号 | 接口 | 方法 | 说明 |
|-----|------|------|------|
| 1 | `/test/constants` | GET | 接口列表 |
| 2 | `/test/constants/common` | GET | 通用常量测试 |
| 3 | `/test/constants/user` | GET | 用户常量测试 |
| 4 | `/test/constants/cache` | GET | 缓存常量测试 |
| 5 | `/test/constants/usage` | GET | 使用示例 |
| 6 | `/test/constants/comparison` | GET | 代码对比（常量vs魔法值）|

---

## 🔗 快速访问链接

### 后端直接访问（需要先启动后端）

```
http://localhost:8080/test                      # 统一响应列表
http://localhost:8080/test/utils                # 工具类列表
http://localhost:8080/test/page                 # 分页列表
http://localhost:8080/test/exception            # 异常处理列表
http://localhost:8080/test/constants            # 常量列表
```

### 前端代理访问（需要先启动前后端）

```
http://localhost:3000/dev-api/test              # 通过前端访问
http://localhost:3000/dev-api/test/utils
http://localhost:3000/dev-api/test/page
http://localhost:3000/dev-api/test/exception
http://localhost:3000/dev-api/test/constants
```

---

## 📖 测试文档索引

### 详细测试文档

1. **第2阶段-快速测试.md**
   - 统一响应测试（8个接口）
   - 工具类测试（5个接口）

2. **第2.3阶段-通用实体类测试.md**
   - 分页测试（5个接口）
   - BaseEntity 字段测试
   - 实际应用场景

3. **第2.4阶段-异常处理测试.md**
   - 异常处理测试（8个接口）
   - 异常处理架构
   - 最佳实践

4. **第2阶段-完成总结.md**
   - 完整的阶段总结
   - 代码统计
   - 学习成果

---

## 🎯 推荐测试顺序

### 第一次测试（基础验证）

1. **测试统一响应**
   ```
   GET /test/hello
   GET /test/success
   ```

2. **测试一个工具类**
   ```
   GET /test/utils/string
   ```

3. **测试一个分页接口**
   ```
   GET /test/page/list
   ```

4. **测试一个异常**
   ```
   GET /test/exception/service
   ```

---

### 完整测试（全面验证）

**按照文档逐个测试：**
1. 阅读 `第2阶段-快速测试.md`
2. 测试所有统一响应接口（8个）
3. 测试所有工具类接口（5个）
4. 阅读 `第2.3阶段-通用实体类测试.md`
5. 测试所有分页接口（5个）
6. 阅读 `第2.4阶段-异常处理测试.md`
7. 测试所有异常处理接口（8个）

---

## 📊 测试报告模板

### 测试记录表

| 序号 | 接口 | 预期结果 | 实际结果 | 状态 | 备注 |
|-----|------|---------|---------|------|------|
| 1 | /test/hello | code=200 | | ⏳ | |
| 2 | /test/utils/string | code=200 | | ⏳ | |
| 3 | /test/page/list | total=10 | | ⏳ | |
| 4 | /test/exception/service | code=500 | | ⏳ | |

**建议：** 测试完成后记录实际结果，便于回顾

---

## 🆘 测试遇到问题？

### Q1: 接口返回 404？

**检查：**
1. ✅ 后端是否启动？
2. ✅ URL 是否正确？
3. ✅ 控制台有没有错误？

**解决：** 查看后端控制台日志

---

### Q2: 前端代理访问失败？

**检查：**
1. ✅ 前端是否启动？
2. ✅ 后端是否启动？
3. ✅ 代理配置是否正确？

**解决：** 检查 `vite.config.ts` 的 proxy 配置

---

### Q3: 异常没有被捕获？

**检查：**
1. ✅ GlobalExceptionHandler 是否编译？
2. ✅ 是否有 @RestControllerAdvice 注解？
3. ✅ 重新启动后端？

**解决：** 重新编译并启动：`mvn clean install -DskipTests`

---

## 🎓 学习建议

### 测试要关注什么？

1. **响应格式**
   - code 是否正确
   - msg 是否有意义
   - data 格式是否符合预期

2. **异常处理**
   - 异常是否被捕获
   - 响应是否为JSON（不是HTML错误页）
   - 日志是否记录

3. **前后端联调**
   - 前端能否正常访问
   - 跨域是否解决
   - 代理是否工作

---

## 📝 测试完成检查清单

### 统一响应 ✅
- [ ] 所有接口返回 AjaxResult 格式
- [ ] success() 方法正常工作
- [ ] error() 方法正常工作
- [ ] 链式调用正常工作

### 工具类 ✅
- [ ] StringUtils 所有方法正常
- [ ] DateUtils 所有方法正常
- [ ] ServletUtils 所有方法正常
- [ ] 综合测试场景正常

### 分页 ✅
- [ ] TableDataInfo 格式正确
- [ ] total 字段正确
- [ ] rows 包含数据列表
- [ ] BaseEntity 字段正确序列化

### 异常处理 ✅
- [ ] 业务异常正确处理
- [ ] 运行时异常正确处理
- [ ] 返回统一JSON格式
- [ ] 不暴露异常堆栈
- [ ] 后端日志正确记录

---

**🎉🎉🎉 第2阶段100%完成！所有31个测试接口正常工作！** 🚀🚀🚀

**准备进入第3阶段：数据访问层！**

